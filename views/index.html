<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>أكاديمية المعالي</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg: #000000; /* تم التعديل إلى الأسود الخالص */
  --drawer-bg: #0a0a0a; /* لون داكن جداً للدرج الجانبي */
  --text-primary: #ffffff;
  --text-secondary: #a1a1aa;
  --border-color: rgba(255,255,255,0.05); /* حدود أفتح */
  --accent-color: #3b82f6; 
  --nav-height: 60px; /* تم تصغير شريط التنقل قليلاً */
  --radius: 20px; /* تم زيادة نصف القطر لانحناءات أكثر نعومة */
}

*{box-sizing:border-box;}

html,body{
  height:100%;
  margin:0;
  font-family: "Tajawal", sans-serif;
  background-color: var(--bg);
  /* تم إزالة التدرج لجعل الخلفية سوداء خالصة */
  background-image: none; 
  color: var(--text-primary);
  -webkit-font-smoothing:antialiased;
  direction: rtl;
}

.page{
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* --- NAVBAR --- */
.navbar{
  height: var(--nav-height);
  display: flex;
  align-items: center;
  justify-content: space-between; /* للحفاظ على الاسم والصورة يمين والأزرار يسار */
  padding: 0 16px; /* تقليل الحشو قليلاً */
  margin: 10px; /* تقليل الهامش قليلاً */
  border-radius: var(--radius); /* انحناءات سلسة */
  background: rgba(0, 0, 0, 0.8); /* خلفية سوداء شفافة */
  backdrop-filter: blur(15px); /* زيادة التمويه */
  border: 1px solid var(--border-color);
  box-shadow: 0 4px 15px rgba(0,0,0,0.5); /* ظل داكن */
  position: relative;
  z-index: 1000;
}

.brand{
  display:flex;
  align-items:center;
  gap:10px; /* تقليل المسافة */
  flex-shrink: 0; 
  max-width: 80%;
}

.brand img{
  width:40px; /* تصغير الصورة قليلاً */
  height:40px; /* تصغير الصورة قليلاً */
  border-radius: 15px; /* انحناء أكثر نعومة للصورة */
  object-fit: cover;
  border: 1px solid rgba(255,255,255,0.1);
}

.brand .title .name{
  font-weight: 800;
  font-size: 17px; /* تصغير الخط قليلاً */
  color: #fff;
  line-height: 1.2;
}

.brand .title .tag{
  font-size: 12px; /* تصغير الخط قليلاً */
  color: var(--text-secondary);
  font-weight: 400;
  margin-top: 1px;
}

/* حاوية الأزرار الجديدة */
.nav-buttons {
  display: flex;
  align-items: center;
  gap: 8px; /* المسافة بين الأزرار */
}

/* تصميم الأزرار - ناعمة ومصغرة */
.menu-toggle, .scan-btn{
  background: rgba(255,255,255,0.05); /* خلفية خفيفة */
  border: none;
  color: #fff;
  cursor: pointer;
  padding: 6px; /* تصغير حجم الزر */
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px; /* انحناء ناعم للزر */
  transition: all 0.2s;
  border: 1px solid rgba(255,255,255,0.08); /* حدود خفيفة لعمق أفضل */
}
.menu-toggle:hover, .scan-btn:hover{
  background: rgba(255,255,255,0.1);
  transform: translateY(-1px);
}
.menu-toggle svg, .scan-btn svg{
  width: 24px; /* تصغير الأيقونة */
  height: 24px; /* تصغير الأيقونة */
}

/* تصميم زر المسح (الكاميرا) */
.scan-btn {
    background: var(--accent-color);
    border-color: var(--accent-color);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
}
.scan-btn:hover {
    background: #2563eb;
    border-color: #2563eb;
    box-shadow: 0 2px 10px rgba(37, 99, 235, 0.6);
}


/* --- SIDE DRAWER --- */
.side-drawer{
  /* تم تطبيق نصف القطر على الزوايا الخارجية */
  border-radius: var(--radius) 0 0 var(--radius); 
  /* ... باقي الأنماط */
}

/* ... (بقية الأنماط الأخرى لم يتم تعديلها بشكل جذري) ... */

</style>
</head>
<body>

<div class="page">
  <header class="navbar">
    
    <div class="brand">
      <img src="https://res.cloudinary.com/duixjs8az/image/upload/v1765132270/post_media/1765132269901-1765132158292.jpg" alt="Logo">
      <div class="title">
        <div class="name">أكاديمية المعالي</div>
        <div class="tag">للتعليم والتطوير</div>
      </div>
    </div>
    
    <div class="nav-buttons">
      <button class="scan-btn" id="scanBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
            <circle cx="12" cy="13" r="4"></circle>
        </svg>
      </button>

      <button class="menu-toggle" id="menuBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
    </div>

  </header>

  <div class="student-cards-section">
      <h2>الطلاب المسجلون حاليًا</h2>
      <div class="cards-container" id="studentCardsContainer">
          <p id="loadingMessage" style="text-align: center; color: var(--text-secondary);">جارٍ تحميل بيانات الطلاب...</p>
      </div>
  </div>
  
  <div class="side-drawer-overlay" id="drawerOverlay"></div>

  <aside class="side-drawer" id="sideDrawer">
    <div class="drawer-header">
      <h3>المستويات التعليمية</h3>
      <button class="close-btn" id="closeBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>

    <div class="drawer-content">
      <div class="accordion-item level-item">
        <div class="accordion-header level-header" onclick="toggleAccordion(this)">
          <span class="level-title">التعليم الإبتدائي</span>
          <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </div>
        <div class="accordion-body level-body">
          
          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الأولى ابتدائي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الأولى ابتدائي" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الأولى ابتدائي" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الأولى ابتدائي" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الأولى ابتدائي" data-subject="التربية المدنية">التربية المدنية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الأولى ابتدائي" data-subject="التربية العلمية">التربية العلمية</button>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الثانية ابتدائي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثانية ابتدائي" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثانية ابتدائي" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثانية ابتدائي" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثانية ابتدائي" data-subject="التربية المدنية">التربية المدنية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثانية ابتدائي" data-subject="التربية العلمية">التربية العلمية</button>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الثالثة ابتدائي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="التربية العلمية">التربية العلمية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الثالثة ابتدائي" data-subject="التربية الإسلامية">التربية الإسلامية</button>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الرابعة ابتدائي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="التربية المدنية">التربية المدنية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الرابعة ابتدائي" data-subject="التربية العلمية">التربية العلمية</button>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الخامسة ابتدائي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="التربية المدنية">التربية المدنية</button>
                 <button class="sub-btn" data-level="التعليم الإبتدائي" data-year="السنة الخامسة ابتدائي" data-subject="التربية العلمية">التربية العلمية</button>
               </div>
            </div>
          </div>

        </div>
      </div>

      <div class="accordion-item level-item">
        <div class="accordion-header level-header" onclick="toggleAccordion(this)">
          <span class="level-title">التعليم المتوسط</span>
          <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </div>
        <div class="accordion-body level-body">
          
          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الأولى متوسط</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="التربية المدنية">التربية المدنية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الأولى متوسط" data-subject="إعلام آلي">إعلام آلي</button>
               </div>
            </div>
          </div>
          
          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الثانية متوسط</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="التربية المدنية">التربية المدنية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثانية متوسط" data-subject="إعلام آلي">إعلام آلي</button>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الثالثة متوسط</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الثالثة متوسط" data-subject="التربية المدنية">التربية المدنية</button>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الرابعة متوسط (BEM)</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">
               <div class="subject-list">
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="الرياضيات">الرياضيات</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="اللغة العربية">اللغة العربية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="التربية الإسلامية">التربية الإسلامية</button>
                 <button class="sub-btn" data-level="التعليم المتوسط" data-year="السنة الرابعة متوسط (BEM)" data-subject="التربية المدنية">التربية المدنية</button>
               </div>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion-item level-item">
        <div class="accordion-header level-header" onclick="toggleAccordion(this)">
          <span class="level-title">التعليم الثانوي</span>
          <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </div>
        <div class="accordion-body level-body">

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الأولى ثانوي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">جذع مشترك علوم وتكنولوجيا</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="اللغة العربية">اللغة العربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="تاريخ وجغرافيا">تاريخ وجغرافيا</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="تربية إسلامية">تربية إسلامية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="تكنولوجيا">تكنولوجيا</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك علوم وتكنولوجيا" data-subject="إعلام آلي">إعلام آلي</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">جذع مشترك آداب</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="اللغة العربية وآدابها">اللغة العربية وآدابها</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="العلوم الإسلامية">العلوم الإسلامية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الأولى ثانوي" data-stream="جذع مشترك آداب" data-subject="إعلام آلي">إعلام آلي</button>
                    </div>
                 </div>
               </div>
            </div>
          </div>

          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الثانية ثانوي</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة علوم تجريبية</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة علوم تجريبية" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة علوم تجريبية" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة علوم تجريبية" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة علوم تجريبية" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة علوم تجريبية" data-subject="لغات أجنبية">لغات أجنبية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة علوم تجريبية" data-subject="تاريخ وجغرافيا">تاريخ وجغرافيا</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة رياضيات</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة رياضيات" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة رياضيات" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة رياضيات" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة رياضيات" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة تقني رياضي</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تقني رياضي" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تقني رياضي" data-subject="الفيزياء">الفيزياء</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تقني رياضي" data-subject="التخصص (هندسة)">التخصص (هندسة)</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تقني رياضي" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تقني رياضي" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة تسيير واقتصاد</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تسيير واقتصاد" data-subject="اقتصاد ومناجمنت">اقتصاد ومناجمنت</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تسيير واقتصاد" data-subject="محاسبة">محاسبة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تسيير واقتصاد" data-subject="رياضيات">رياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تسيير واقتصاد" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة تسيير واقتصاد" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة لغات أجنبية</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة لغات أجنبية" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة لغات أجنبية" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة لغات أجنبية" data-subject="اللغة الثالثة (ألمانية/إسبانية/إيطالية)">اللغة الثالثة (ألمانية/إسبانية/إيطالية)</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة لغات أجنبية" data-subject="تاريخ وجغرافيا">تاريخ وجغرافيا</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة آداب وفلسفة</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة آداب وفلسفة" data-subject="اللغة العربية وآدابها">اللغة العربية وآدابها</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة آداب وفلسفة" data-subject="التاريخ والجغرافيا">التاريخ والجغرافيا</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثانية ثانوي" data-stream="شعبة آداب وفلسفة" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>
            </div>
          </div>
          
          <div class="accordion-item year-item">
            <div class="accordion-header year-header" onclick="toggleAccordion(this)">
              <div class="title-wrap">
                <svg class="file-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span>السنة الثالثة ثانوي (BAC)</span>
              </div>
              <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
            </div>
            <div class="accordion-body year-body">

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة علوم تجريبية</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة علوم تجريبية" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة علوم تجريبية" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة علوم تجريبية" data-subject="علوم الطبيعة والحياة">علوم الطبيعة والحياة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة علوم تجريبية" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة علوم تجريبية" data-subject="فلسفة">فلسفة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة علوم تجريبية" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة رياضيات</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة رياضيات" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة رياضيات" data-subject="العلوم الفيزيائية">العلوم الفيزيائية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة رياضيات" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة رياضيات" data-subject="فلسفة">فلسفة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة رياضيات" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة تقني رياضي</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="الرياضيات">الرياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="الفيزياء">الفيزياء</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="هندسة ميكانيكية">هندسة ميكانيكية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="هندسة كهربائية">هندسة كهربائية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="هندسة مدنية">هندسة مدنية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="هندسة الطرائق">هندسة الطرائق</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تقني رياضي" data-subject="فلسفة">فلسفة</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة تسيير واقتصاد</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تسيير واقتصاد" data-subject="اقتصاد ومناجمنت">اقتصاد ومناجمنت</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تسيير واقتصاد" data-subject="محاسبة">محاسبة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تسيير واقتصاد" data-subject="رياضيات">رياضيات</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تسيير واقتصاد" data-subject="قانون">قانون</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تسيير واقتصاد" data-subject="لغة عربية">لغة عربية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة تسيير واقتصاد" data-subject="فلسفة">فلسفة</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة لغات أجنبية</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة لغات أجنبية" data-subject="اللغة الفرنسية">اللغة الفرنسية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة لغات أجنبية" data-subject="اللغة الإنجليزية">اللغة الإنجليزية</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة لغات أجنبية" data-subject="اللغة الثالثة (ألمانية/إسبانية/إيطالية)">اللغة الثالثة (ألمانية/إسبانية/إيطالية)</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة لغات أجنبية" data-subject="تاريخ وجغرافيا">تاريخ وجغرافيا</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة لغات أجنبية" data-subject="فلسفة">فلسفة</button>
                    </div>
                 </div>
               </div>

               <div class="accordion-item stream-item">
                 <div class="accordion-header stream-header" onclick="toggleAccordion(this)">
                   <span class="stream-title">شعبة آداب وفلسفة</span>
                   <svg class="chevron-icon" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                 </div>
                 <div class="accordion-body stream-body">
                    <div class="subject-list">
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة آداب وفلسفة" data-subject="فلسفة">فلسفة</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة آداب وفلسفة" data-subject="اللغة العربية وآدابها">اللغة العربية وآدابها</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة آداب وفلسفة" data-subject="تاريخ وجغرافيا">تاريخ وجغرافيا</button>
                      <button class="sub-btn" data-level="التعليم الثانوي" data-year="السنة الثالثة ثانوي (BAC)" data-stream="شعبة آداب وفلسفة" data-subject="لغات أجنبية">لغات أجنبية</button>
                    </div>
                 </div>
               </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </aside>

  <main class="hero">
    <div class="hero-content">
      <h1>مرحباً بك في أكاديمية المعالي</h1>
      <p>منصتك الأولى للدعم المدرسي الشامل والتحضير الفعال للاختبارات النهائية.</p>
      <button onclick="openRegistrationModal()" style="padding: 12px 25px; border-radius: 12px; font-weight: 700; font-size: 16px; background: var(--accent-color); color: #fff; border: none; cursor: pointer; margin-top: 20px;">تسجيل طالب جديد</button>
    </div>
  </main>


  <footer>
    &copy; 2025 أكاديمية المعالي. جميع الحقوق محفوظة.
  </footer>
</div>


<div class="modal-overlay" id="modalOverlay">
    <div class="modal-content" id="registrationModal">
        <button class="modal-close-btn" onclick="closeRegistrationModal()">×</button>
        <h3>تسجيل طالب جديد</h3>
        
        <label for="studentName">اسم الطالب الكامل:</label>
        <input type="text" id="studentName" placeholder="أدخل اسم الطالب">
        
        <label for="selectedSubjects">المواد المحددة:</label>
        <div id="selectedSubjects" style="min-height: 50px; padding: 10px; border: 1px dashed var(--border-color); border-radius: 8px; margin-bottom: 20px; color: #e4e4e7; font-size: 14px; background: rgba(0,0,0,0.1);">
            لا توجد مواد محددة بعد.
        </div>

        <button id="registerButton">تسجيل</button>
        <div class="modal-result" id="modalResult" style="display: none;">
            <h4>تم التسجيل بنجاح!</h4>
            <img id="qrCodeImage" src="" alt="QR Code">
            <p id="studentIdDisplay" style="color: var(--text-secondary);"></p>
            <button class="print-btn">طباعة رمز الطالب</button>
        </div>
    </div>
</div>

<script>
  // DOM Elements
  const menuBtn = document.getElementById('menuBtn');
  const closeBtn = document.getElementById('closeBtn');
  const sideDrawer = document.getElementById('sideDrawer');
  const drawerOverlay = document.getElementById('drawerOverlay');
  const modalOverlay = document.getElementById('modalOverlay');
  const studentCardsContainer = document.getElementById('studentCardsContainer');
  const loadingMessage = document.getElementById('loadingMessage');
  const registrationModal = document.getElementById('registrationModal');
  const modalResult = document.getElementById('modalResult');
  
  // New Scan Button
  const scanBtn = document.getElementById('scanBtn');


  // State
  let subjectsToRegister = [];

  // Drawer Functions
  function openDrawer() {
    sideDrawer.classList.add('open');
    drawerOverlay.classList.add('open');
  }

  function closeDrawer() {
    sideDrawer.classList.remove('open');
    drawerOverlay.classList.remove('open');
  }

  // Modal Functions
  function openRegistrationModal() {
    modalOverlay.classList.add('open');
    // Hide result on open
    modalResult.style.display = 'none';
    registrationModal.style.opacity = '1';
    registrationModal.style.pointerEvents = 'auto';
  }

  function closeRegistrationModal() {
    modalOverlay.classList.remove('open');
    // Reset modal content for the next use (optional but good practice)
    document.getElementById('studentName').value = '';
    subjectsToRegister = [];
    document.getElementById('selectedSubjects').innerHTML = 'لا توجد مواد محددة بعد.';
    modalResult.style.display = 'none';
    document.getElementById('registerButton').style.display = 'block';
  }

  // Accordion Toggle
  function toggleAccordion(header) {
    const item = header.closest('.accordion-item');
    item.classList.toggle('active');
    // Close others
    document.querySelectorAll('.level-item').forEach(otherItem => {
      if (otherItem !== item && otherItem.classList.contains('active')) {
        otherItem.classList.remove('active');
      }
    });
  }

  // General Event Listeners
  menuBtn.addEventListener('click', openDrawer);
  closeBtn.addEventListener('click', closeDrawer);
  drawerOverlay.addEventListener('click', closeDrawer);
  modalOverlay.addEventListener('click', (event) => {
    if (event.target === modalOverlay) {
      closeRegistrationModal();
    }
  });

  // Helper to get subject info
  function getSubjectInfo(button) {
    const level = button.getAttribute('data-level');
    const year = button.getAttribute('data-year');
    const stream = button.getAttribute('data-stream');
    const subject = button.getAttribute('data-subject');
    let info = `${level} - ${year}`;
    if (stream) {
      info += ` - ${stream}`;
    }
    info += ` (${subject})`;
    return { level, year, stream, subject, fullInfo: info };
  }

  // Event delegation for subject buttons
  document.querySelectorAll('.subject-list').forEach(list => {
    list.addEventListener('click', (event) => {
      if (event.target.classList.contains('sub-btn')) {
        const button = event.target;
        const subjectInfo = getSubjectInfo(button);
        
        if (subjectsToRegister.some(s => s.fullInfo === subjectInfo.fullInfo)) {
          alert('هذه المادة مضافة بالفعل.');
          return;
        }

        subjectsToRegister.push(subjectInfo);
        
        // Display selected subjects in the modal
        const selectedSubjectsDiv = document.getElementById('selectedSubjects');
        selectedSubjectsDiv.innerHTML = subjectsToRegister.map(s => `<div>• ${s.fullInfo}</div>`).join('');
        closeDrawer();
        openRegistrationModal();
      }
    });
  });

  // Registration logic
  document.getElementById('registerButton').addEventListener('click', async () => {
    const studentName = document.getElementById('studentName').value.trim();
    if (!studentName || subjectsToRegister.length === 0) {
      alert('الرجاء إدخال اسم الطالب واختيار مادة واحدة على الأقل.');
      return;
    }

    // Prepare data for the server
    const registrationData = {
      name: studentName,
      subjects: subjectsToRegister.map(s => s.fullInfo),
      isActive: true, // New student is active
      registrationDate: new Date().toISOString().split('T')[0]
    };

    try {
      // Simulate network request
      const response = await fetch('/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(registrationData),
      });

      const result = await response.json();

      if (response.ok) {
        document.getElementById('registerButton').style.display = 'none';
        
        document.getElementById('studentIdDisplay').textContent = `ID: ${result.id}`;
        document.getElementById('qrCodeImage').src = result.qrCodeUrl;
        
        modalResult.style.display = 'block';
        fetchStudentCards(); // Refresh the student list

      } else {
        alert(`فشل التسجيل: ${result.message}`);
      }

    } catch (error) {
      console.error('Registration failed:', error);
      alert('حدث خطأ أثناء الاتصال بالخادم. يرجى المحاولة مرة أخرى.');
    }
  });

  // Fetch and render student cards
  async function fetchStudentCards() {
      loadingMessage.style.display = 'block';
      studentCardsContainer.innerHTML = ''; // Clear existing cards
      try {
          const response = await fetch('/students');
          const students = await response.json();

          loadingMessage.style.display = 'none';

          if (Object.keys(students).length === 0) {
              studentCardsContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">لم يتم تسجيل أي طالب بعد.</p>';
              return;
          }
          
          for (const [id, student] of Object.entries(students)) {
              const card = document.createElement('div');
              card.className = 'student-card';
              
              const statusClass = student.isActive ? 'status-active' : 'status-inactive';
              const statusText = student.isActive ? 'نشط' : 'غير نشط';
              
              card.innerHTML = `
                  <div class="name">${student.name}</div>
                  <div class="details">
                      <span>ID: ${id.substring(0, 8)}...</span>
                      <span class="status-indicator ${statusClass}">${statusText}</span>
                  </div>
                  <div class="subjects"><strong>المواد:</strong> ${student.subjects.join(' | ')}</div>
              `;
              studentCardsContainer.appendChild(card);
          }
          
      } catch (error) {
          console.error('Error fetching student cards:', error);
          loadingMessage.textContent = 'فشل في تحميل بيانات الطلاب.';
      }
  }

  // Fetch students on page load
  fetchStudentCards();
  
  // 4. [NEW] Scan Button Functionality
  scanBtn.addEventListener('click', () => {
    // 1. محاكاة فتح الكاميرا ومسح رمز QR
    const scannedStudentId = 'S00123456'; // معرف طالب وهمي لغرض المحاكاة

    console.log(`[ACTION] Simulating QR Scan for Student ID: ${scannedStudentId}`);
    
    // 2. التوجيه إلى البروفايل (محاكاة باستخدام النافذة المنبثقة الحالية)
    const originalModalHTML = registrationModal.innerHTML;

    // استبدال محتوى النافذة المنبثقة بمحتوى ملف الطالب الشخصي
    registrationModal.innerHTML = `
        <button class="modal-close-btn" id="closeProfileBtn">×</button>
        <h3>الملف الشخصي للطالب (حضور)</h3>
        
        <div style="text-align: right; line-height: 2.0; font-size: 16px;">
            <p style="color:var(--accent-color); font-weight:700;">تم تأكيد المسح!</p>
            <p><strong>اسم الطالب:</strong> ${scannedStudentId}</p>
            <p><strong>المستوى/المادة:</strong> السنة الثالثة ثانوي (الرياضيات)</p>
            <p style="margin-top:20px; color:#43cf66; font-weight: 700;">تم تسجيل الحضور بنجاح اليوم.</p>
            <p style="font-size:12px; color:var(--text-secondary); margin-top: 15px;">**تنبيه: هذه رسالة محاكاة لوظيفة الكاميرا والتوجيه للبروفايل.**</p>
        </div>
        <button id="returnToMain" style="background:var(--accent-color); margin-top:20px; width:100%; padding: 10px 20px; border:none; color:white; border-radius: 8px; cursor:pointer;">العودة إلى القائمة الرئيسية</button>
    `;
    
    modalOverlay.classList.add('open');
    
    // إضافة مستمعي إغلاق للنافذة المنبثقة الجديدة
    const closeProfileBtn = document.getElementById('closeProfileBtn');
    const returnToMainBtn = document.getElementById('returnToMain');

    const restoreModal = () => {
        modalOverlay.classList.remove('open');
        // يتم استعادة المحتوى الأصلي للنافذة المنبثقة عند الإغلاق
        // ملاحظة: في التطبيق الفعلي قد تحتاج فقط لإغلاق النافذة والعمل على صفحة مخصصة للبروفايل.
        setTimeout(() => {
            registrationModal.innerHTML = originalModalHTML;
        }, 300); // تأخير بسيط للسماح بانتقال الإغلاق
    };

    closeProfileBtn.onclick = restoreModal;
    returnToMainBtn.onclick = restoreModal;
  });
  
</script>
</body>
</html>
