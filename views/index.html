<!doctype html>

<html lang="ar" dir="rtl">  
<head>  
<meta charset="utf-8">  
<meta name="viewport" content="width=device-width,initial-scale=1">  
<title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ù…Ø¹Ø§Ù„ÙŠ - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨</title>  
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">  
<style>  
:root{  
  --bg: #0b0b0c;  
  --drawer-bg: #151517;  
  --text-primary: #ffffff;  
  --text-secondary: #a1a1aa;  
  --border-color: rgba(255,255,255,0.08);  
  --accent-color: #3b82f6;   
  --success-color: #10b981;
  --error-color: #ef4444;
  --nav-height: 72px;  
  --radius: 12px;  
}  
  
*{box-sizing:border-box;}  
  
html,body{  
  height:100%;  
  margin:0;  
  font-family: "Tajawal", sans-serif;  
  background-color: var(--bg);  
  background-image:   
    radial-gradient(circle at 15% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 25%),  
    radial-gradient(circle at 85% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 25%);  
  color: var(--text-primary);  
}  
  
.site-container{  
  padding: 20px;  
  max-width: 900px;  
  margin: auto;  
  transition: opacity 0.3s;
}  

.header {
    text-align: center;
    padding: 40px 0 20px;
}
.header h1 {
    font-size: 2.5rem;
    color: var(--accent-color);
    margin-bottom: 5px;
}
.header p {
    color: var(--text-secondary);
}
  
.section{  
  background-color: var(--drawer-bg);  
  padding: 20px;  
  border-radius: var(--radius);  
  margin-bottom: 25px;  
  border: 1px solid var(--border-color);
}  
  
.section-title{  
  font-size: 1.5rem;  
  margin-top: 0;  
  margin-bottom: 15px;  
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}  
  
.grid-container {  
  display: grid;  
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));  
  gap: 15px;  
}  
  
.subject-button, .main-button {  
  background-color: var(--bg);  
  color: var(--text-primary);  
  padding: 15px;  
  border: 1px solid var(--border-color);  
  border-radius: var(--radius);  
  cursor: pointer;  
  text-align: center;  
  font-weight: 500;  
  transition: background-color 0.2s, border-color 0.2s;  
}  
  
.subject-button:hover, .main-button:hover {  
  background-color: #1f1f22;  
  border-color: var(--accent-color);  
}  

.input-group {
    display: flex;
    gap: 10px;
}

.input-group input[type="text"] {
    flex-grow: 1;
    padding: 12px;
    background-color: var(--bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
}

.message-box {
    padding: 15px;
    border-radius: 8px;
    font-weight: 500;
    margin-top: 15px;
}
.message-box.success {
    background-color: rgba(16, 185, 129, 0.1); /* Green */
    border: 1px solid var(--success-color);
    color: var(--success-color);
}
.message-box.error {
    background-color: rgba(239, 68, 68, 0.1); /* Red */
    border: 1px solid var(--error-color);
    color: var(--error-color);
}
.message-box.secondary {
    background-color: rgba(255, 255, 255, 0.05); 
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
}

/* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ø¹Ø§Ù…Ø© */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 900;
}

.modal-overlay.show {
    display: flex;
}

.modal {
    background-color: var(--drawer-bg);
    border-radius: var(--radius);
    padding: 30px;
    width: 90%;
    max-width: 450px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-color);
}

.modal h3 {
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 10px;
    margin-top: 0;
    margin-bottom: 20px;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.modal-actions button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: background-color 0.2s;
}

.modal-actions .confirm-btn {
    background-color: var(--accent-color);
    color: var(--text-primary);
}

.modal-actions .cancel-btn {
    background-color: var(--text-secondary);
    color: var(--bg);
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ø¬Ø§Ø¬ (Glassmorphism) Ù„Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© */
.glass-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7); /* Ø®Ù„ÙÙŠØ© Ù…Ø¹ØªÙ…Ø© */
    backdrop-filter: blur(10px); /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ø¬Ø§Ø¬ */
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.glass-modal-overlay.show {
    display: flex;
}

.glass-modal {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.18);
    border-radius: var(--radius);
    padding: 30px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
}

.glass-modal h3 {
    text-align: center;
    color: var(--text-primary);
    margin-top: 0;
}

.glass-modal input[type="text"] {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    background-color: var(--drawer-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
}

.glass-modal .modal-submit-btn {
    width: 100%;
    padding: 12px;
    background-color: var(--accent-color);
    color: var(--text-primary);
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: background-color 0.2s;
}

.glass-modal .modal-submit-btn:hover {
    background-color: #5c99ff;
}

#qr-code-section {
    background-color: var(--drawer-bg);
    padding: 20px;
    border-radius: var(--radius);
    margin-top: 25px;
    text-align: center;
    display: none;
    border: 1px solid var(--border-color);
}

#qr-code-section img {
    margin: 20px auto;
    border: 1px solid var(--border-color);
    padding: 10px;
    background-color: white;
    border-radius: var(--radius);
    max-width: 200px;
    height: auto;
}

</style>  
</head>  
<body>  

<div class="site-container">  
    <header class="header">
        <h1>ğŸ“š Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ù…Ø¹Ø§Ù„ÙŠ Ù„Ù„Ø¯Ø¹Ù…</h1>
        <p>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŒ Ø§Ù„Ø³Ù†Ø©ØŒ ÙˆØ§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„.</p>
    </header>

    <section class="section">
        <h2 class="section-title">ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø±Ù…Ø²</h2>
        <div class="input-group">
            <input type="text" id="registration-id-input" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Ù…Ø«Ù„Ø§Ù‹: -NxY1Zv...)">
            <button id="check-status-btn" class="main-button" style="min-width: 100px;">Ø§Ù„ØªØ­Ù‚Ù‚</button>
        </div>
        <div id="status-message-box" class="message-box secondary" style="display:none; margin-top: 15px;"></div>
    </section>

    <section id="qr-code-section">
        <h3 style="color: var(--success-color);">âœ… Ø±Ù…Ø² Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„ (QR Code)</h3>
        <p style="color: var(--text-secondary);">ÙŠØ±Ø¬Ù‰ Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø·Ø¨Ø§Ø¹ØªÙ‡ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.</p>
        <img id="qr-code-image" src="" alt="Ø±Ù…Ø² Ø§Ù„ØªØ³Ø¬ÙŠÙ„ QR">
    </section>

    <section class="section">  
        <h2 class="section-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h2>  
        <div class="grid-container">  
            <button class="subject-button" data-level="Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</button>  
            <button class="subject-button" data-level="Ù…ØªÙˆØ³Ø·">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</button>  
            <button class="subject-button" data-level="Ø«Ø§Ù†ÙˆÙŠ">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</button>  
            <button class="subject-button" data-level="Ø¬Ø§Ù…Ø¹ÙŠ">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</button>  
        </div>  
    </section>  
    
    <section class="section">  
        <h2 class="section-title">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>  
        <div class="grid-container">  
            <button class="subject-button" data-year="Ø£ÙˆÙ„Ù‰">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</button>  
            <button class="subject-button" data-year="Ø«Ø§Ù†ÙŠØ©">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</button>  
            <button class="subject-button" data-year="Ø«Ø§Ù„Ø«Ø©">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©</button>  
            <button class="subject-button" data-year="Ø±Ø§Ø¨Ø¹Ø©">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©</button>  
            <button class="subject-button" data-year="Ø®Ø§Ù…Ø³Ø©">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©</button>
            <button class="subject-button" data-year="Ø³Ø§Ø¯Ø³Ø©">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©</button>
        </div>  
    </section>  
    
    <section class="section">  
        <h2 class="section-title">Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</h2>  
        <div class="grid-container">  
            <button class="subject-button register-btn" data-subject="Ø±ÙŠØ§Ø¶ÙŠØ§Øª">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</button>  
            <button class="subject-button register-btn" data-subject="Ø¹Ù„ÙˆÙ…">Ø§Ù„Ø¹Ù„ÙˆÙ…</button>  
            <button class="subject-button register-btn" data-subject="ÙÙŠØ²ÙŠØ§Ø¡">Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</button>  
            <button class="subject-button register-btn" data-subject="ÙƒÙŠÙ…ÙŠØ§Ø¡">Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</button>  
            <button class="subject-button register-btn" data-subject="Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©">Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>  
            <button class="subject-button register-btn" data-subject="Ù„ØºØ© ÙØ±Ù†Ø³ÙŠØ©">Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©</button>
            <button class="subject-button register-btn" data-subject="Ù„ØºØ© Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©">Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</button>
            <button class="subject-button register-btn" data-subject="ØªØ§Ø±ÙŠØ® ÙˆØ¬ØºØ±Ø§ÙÙŠØ§">ØªØ§Ø±ÙŠØ® ÙˆØ¬ØºØ±Ø§ÙÙŠØ§</button>
        </div>  
    </section>  
</div>  

<div id="initial-modal-overlay" class="glass-modal-overlay">
    <div class="glass-modal">
        <h3>ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ù…Ø¹Ø§Ù„ÙŠ</h3>
        <p style="color: var(--text-secondary); text-align: center;">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø£Ùˆ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</p>
        
        <input type="text" id="initial-student-name" placeholder="Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨ ÙƒØ§Ù…Ù„Ø§Ù‹" required>
        <input type="text" id="initial-contact-number" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ ÙˆØ³ÙŠÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

        <button id="modal-submit-btn" class="modal-submit-btn">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
    </div>
</div>

<div id="confirm-modal-overlay" class="modal-overlay">  
    <div class="modal">  
        <h3>ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</h3>  
        <div id="confirm-modal-content"></div>  
        <div class="modal-actions">  
            <button class="cancel-btn" onclick="hideModal()">Ø¥Ù„ØºØ§Ø¡</button>  
            <button class="confirm-btn" id="final-confirm-btn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>  
        </div>  
    </div>  
</div>  

<div id="result-modal-overlay" class="modal-overlay">  
    <div class="modal">  
        <h3 id="result-modal-title"></h3>  
        <pre id="result-modal-content" style="white-space: pre-wrap; font-family: 'Tajawal', sans-serif;"></pre>  
        <div class="modal-actions">  
            <button class="confirm-btn" onclick="hideModal()">Ø­Ø³Ù†Ø§Ù‹</button>  
        </div>  
    </div>  
</div>  

<script>  
  const subjectButtons = document.querySelectorAll('.subject-button');  
  const registerButtons = document.querySelectorAll('.register-btn');
  const modalOverlay = document.getElementById('confirm-modal-overlay');  
  const dynamicModalContent = document.getElementById('confirm-modal-content');  
  const resultModalOverlay = document.getElementById('result-modal-overlay');  
  const resultModalTitle = document.getElementById('result-modal-title');  
  const resultModalContent = document.getElementById('result-modal-content');  

  let currentSelection = { level: null, year: null, subject: null };
  let currentRegistrationData = {};

  // 1. Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (Glass Modal)
  function showInitialModal() {
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…
      document.querySelector('.site-container').style.opacity = 0.3;
      document.getElementById('initial-modal-overlay').classList.add('show');
  }

  document.getElementById('modal-submit-btn').addEventListener('click', () => {
      const nameInput = document.getElementById('initial-student-name');
      const contactInput = document.getElementById('initial-contact-number');
      
      if (nameInput.value.trim() === "") {
          alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨ Ø£ÙˆÙ„Ø§Ù‹.");
          return;
      }

      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
      currentRegistrationData.studentName = nameInput.value.trim();
      currentRegistrationData.contactNumber = contactInput.value.trim();
      
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆØ§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø©
      document.getElementById('initial-modal-overlay').classList.remove('show');
      document.querySelector('.site-container').style.opacity = 1;
  });

  document.addEventListener('DOMContentLoaded', showInitialModal);

  // 2. Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ø£Ø®Ø±Ù‰
  function hideModal() {  
      modalOverlay.classList.remove('show');  
      resultModalOverlay.classList.remove('show');  
  }  

  function showResultModal(title, message, isSuccess) {
      resultModalTitle.textContent = title;
      resultModalContent.textContent = message;
      resultModalOverlay.classList.add('show');
      resultModalTitle.style.color = isSuccess ? 'var(--success-color)' : 'var(--error-color)';
  }

  // 3. Ø¯Ø§Ù„Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª ÙˆØ§Ù„Ø³Ù†ÙˆØ§Øª
  function handleSelection(event) {
      const button = event.currentTarget;
      const dataType = button.dataset.level ? 'level' : (button.dataset.year ? 'year' : 'subject');
      const dataValue = button.dataset[dataType];

      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
      document.querySelectorAll(`[data-${dataType}]`).forEach(btn => {
          btn.style.backgroundColor = 'var(--bg)';
          btn.style.borderColor = 'var(--border-color)';
      });

      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø²Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
      button.style.backgroundColor = 'var(--accent-color)';
      button.style.borderColor = 'var(--accent-color)';

      currentSelection[dataType] = dataValue;
  }

  // 4. Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø§Ø¯Ø©)
  function handleRegistration(event) {
      const { level, year } = currentSelection;
      const subject = event.currentTarget.dataset.subject;
      const studentName = currentRegistrationData.studentName;
      const contactNumber = currentRegistrationData.contactNumber;

      if (!studentName) {
          showResultModal("âš ï¸ Ø®Ø·Ø£", 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨ Ø£ÙˆÙ„Ø§Ù‹ ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©.', false);
          showInitialModal(); // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
          return;
      }

      if (!level || !year) {
          showResultModal("âš ï¸ Ø®Ø·Ø£", 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± **Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ** Ùˆ **Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©** Ø£ÙˆÙ„Ø§Ù‹.', false);
          return;
      }

      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù„ØªØ£ÙƒÙŠØ¯
      currentRegistrationData = { name: studentName, level, year, subject, contact: contactNumber };
      showConfirmModal();
  }

  // 5. Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
  function showConfirmModal() {
      const { name, level, year, subject, contact } = currentRegistrationData;

      const content = `
          <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${name}</p>
          <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø§ØªØµØ§Ù„:</strong> ${contact || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</p> 
          <p><strong>Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</strong> ${level}</p>
          <p><strong>Ø§Ù„Ø³Ù†Ø©:</strong> ${year}</p>
          <p><strong>Ø§Ù„Ù…Ø§Ø¯Ø©:</strong> ${subject}</p>
          <p style="font-weight: 700;">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŸ</p>
      `;

      dynamicModalContent.innerHTML = content;
      modalOverlay.classList.add('show');
  }

  // 6. Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
  async function confirmRegistration() {
      const { name, level, year, subject, contact } = currentRegistrationData;

      if (!name) {
          showResultModal("âš ï¸ Ø®Ø·Ø£", "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.", false);
          return;
      }

      try {
          const response = await fetch('/api/register', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                  name,
                  level,
                  year,
                  subject,
                  contact
              }),
          });

          const data = await response.json();
          // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø£ÙˆÙ„Ø§Ù‹
          hideModal();
          currentRegistrationData = {};
          
          if (response.ok) {
              const bodyMessage = `${data.message}\n\nÙŠØ±Ø¬Ù‰ Ø­ÙØ¸ Ø±Ù‚Ù… Ø·Ù„Ø¨Ùƒ: ${data.registrationId}`;
              showResultModal("âœ… Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ³Ø¬ÙŠÙ„", bodyMessage, true);
          } else {
              showResultModal("âŒ ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„", data.message, false);
          }

      } catch (error) {
          console.error('Fetch Error:', error);
          hideModal();
          showResultModal("âš ï¸ Ø®Ø·Ø£ Ø§Ù„Ø§ØªØµØ§Ù„", 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ server.js.', false);
      }
  }

  // 7. Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ¹Ø±Ø¶ QR
  document.getElementById('check-status-btn').addEventListener('click', async () => {
      const registrationId = document.getElementById('registration-id-input').value.trim();
      const statusMessageBox = document.getElementById('status-message-box');
      const qrSection = document.getElementById('qr-code-section');
      const qrImage = document.getElementById('qr-code-image');

      statusMessageBox.style.display = 'none';
      qrSection.style.display = 'none';

      if (!registrationId) {
          statusMessageBox.className = 'message-box secondary';
          statusMessageBox.innerHTML = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ.';
          statusMessageBox.style.display = 'block';
          return;
      }

      try {
          const response = await fetch('/api/status', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({ registrationId }),
          });

          const data = await response.json();

          if (response.ok && data.status === 'accepted') {
              statusMessageBox.className = 'message-box success';
              statusMessageBox.innerHTML = data.message + `<br><strong>Ø§Ù„Ø·Ø§Ù„Ø¨:</strong> ${data.details.name}`;
              qrImage.src = data.qrCode; // Ø¹Ø±Ø¶ ØµÙˆØ±Ø© Ø±Ù…Ø² QR
              qrSection.style.display = 'block'; // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… QR
          } else {
              // Ø­Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø£Ùˆ Ø±ÙØ¶ Ø£Ùˆ Ø®Ø·Ø£ 404
              statusMessageBox.className = 'message-box error';
              statusMessageBox.innerHTML = data.message;
              if(data.details) {
                 statusMessageBox.innerHTML += `<br><strong>Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ù€:</strong> ${data.details.name}`;
              }
          }
          statusMessageBox.style.display = 'block';

      } catch (error) {
          console.error('Status Check Error:', error);
          statusMessageBox.className = 'message-box error';
          statusMessageBox.innerHTML = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ server.js.';
          statusMessageBox.style.display = 'block';
      }
  });


  // 8. Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
  subjectButtons.forEach(button => {
      button.addEventListener('click', handleSelection);
  });
  registerButtons.forEach(button => {
      button.addEventListener('click', handleRegistration);
  });
  document.getElementById('final-confirm-btn').addEventListener('click', confirmRegistration);
</script>  
</body>  
</html>
